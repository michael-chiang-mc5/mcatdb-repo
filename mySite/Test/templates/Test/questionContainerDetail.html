{% extends "MCBase/base.html" %}
{% load staticfiles %}

{% block javascript %}
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      TeX: {extensions: ["mhchem.js"]}
    });
  </script>
  <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <link rel="stylesheet" href="{% static 'Test/css/passageDetail.css' %}">
  <script type="text/javascript" src="{% static 'Test/js/template_passage.js' %}"></script>
{% endblock %}

{% block title %}
  question
{% endblock %}

{% block body_block %}
  {% if request.user.is_superuser %}
    <div>
      [<a href="{% url 'Test:questionContainerList' %}">See full list</a>] &nbsp;
      [<a href="{% url 'Test:addPassageEditor' %}">Add passage</a>] &nbsp;
      [<a href="{% url 'Test:addQuestionEditor' 0 %}">Add single question</a>] &nbsp;
      [<a class="cursor-pointer" id="show-edit-tools">Show editing tools</a>] &nbsp;
      [<a class="cursor-pointer" id="hide-edit-tools">Hide editing tools</a>] &nbsp;
    </div>
  {% endif %}

  <div class="admin-tools {% if request.user.userprofile.seeAdminTools == False %}display-none{% endif %}">
    {% for tag in questionContainer.tags.all %}
      {{ tag }} &nbsp;
    {% endfor %}
    [<a href="{% url 'Test:editTag' questionContainer.pk %}">edit tags</a>]
  </div>

  {% if question %}
    {% include "Test/template_question.html" %}
    <!-- submit button. Cannot be refactored into template_question because passage also uses template_question -->
    <br />
    <button class="btn btn-primary width-100" type="submit">submit</button>
  {% elif passage %}
    {% include "Test/template_passage.html" %}
  {% else %}
    unknown type
  {% endif %}

  <!-- user comments -->
  {% if comments|length == 0 %}
    <h1>
      No comments! Be the first to add yours!
    </h1>
  {% else %}
    <h1>
      {{ comments|length }} comments <sup>Add your own</sup>
    </h1>
  {% endif %}

  <form id="form1" name="form1" method="post" action="{% url 'Test:addComment' questionContainer.pk %}">
    {% csrf_token %}
    <textarea name="form-text" rows="5">asdf</textarea>
    <button class="btn btn-primary width-100" type="submit">submit</button>
  </form>

  {% for comment in comments %}
    <div>
      {{ comment }}
    </div>
  {% endfor %}

{% endblock %}
